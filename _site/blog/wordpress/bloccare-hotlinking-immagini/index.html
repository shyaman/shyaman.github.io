<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Person" lang="it">

    
        <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1 maximum-scale=1; minimum-scale=1; user-scalable=no;">

  <meta name="keywords" content="htaccess,apache,wordpress">
  <meta name="baseurl" content="">
  <meta name="robots" content="index,follow" />
  <meta name="rating" content="general">
  <!-- favicon -->
  <link rel="shortcut icon" href=" /static/assets/img/favicon.jpg ">
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Come bloccare l’hotlinking delle immagini con .htaccess | Shyaman Jayasundara</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Come bloccare l’hotlinking delle immagini con .htaccess" />
<meta name="author" content="Shyaman Jayasundara" />
<meta property="og:locale" content="it_IT" />
<meta name="description" content="L’hotlinking consiste nel mostrare una o più risorse (tipicamente immagini) all’interno di una pagina web, ad insaputa del proprietario del sito originale. Vediamo come impedirla, usando .htaccess e Apache" />
<meta property="og:description" content="L’hotlinking consiste nel mostrare una o più risorse (tipicamente immagini) all’interno di una pagina web, ad insaputa del proprietario del sito originale. Vediamo come impedirla, usando .htaccess e Apache" />
<link rel="canonical" href="http://localhost:4000/blog/wordpress/bloccare-hotlinking-immagini/" />
<meta property="og:url" content="http://localhost:4000/blog/wordpress/bloccare-hotlinking-immagini/" />
<meta property="og:site_name" content="Shyaman Jayasundara" />
<meta property="og:image" content="http://localhost:4000/static/assets/img/blog/hotlinking-htaccess/NoHotlinking.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-13T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@BloggerStanco" />
<meta name="twitter:creator" content="@Shyaman Jayasundara" />
<meta name="google-site-verification" content="FByo2xcDR6RaUId2DdQjhAmq9YMjlEhVlL0OgK8KDzU" />
<script type="application/ld+json">
{"description":"L’hotlinking consiste nel mostrare una o più risorse (tipicamente immagini) all’interno di una pagina web, ad insaputa del proprietario del sito originale. Vediamo come impedirla, usando .htaccess e Apache","author":{"@type":"Person","name":"Shyaman Jayasundara"},"@type":"BlogPosting","url":"http://localhost:4000/blog/wordpress/bloccare-hotlinking-immagini/","image":"http://localhost:4000/static/assets/img/blog/hotlinking-htaccess/NoHotlinking.jpg","headline":"Come bloccare l’hotlinking delle immagini con .htaccess","dateModified":"2018-04-13T00:00:00+05:30","datePublished":"2018-04-13T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/wordpress/bloccare-hotlinking-immagini/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <!--
  Blog
  -->
  <!-- Main CSS -->
  <link href="/static/assets/app-20180717.min.css" rel="stylesheet">
  <link href="/static/css/custom.css" rel="stylesheet">
  <!-- Layout Specific CSS -->
  
  <link href="/static/css/blogpadding.css" rel="stylesheet" media="screen">
  
  <link href="/static/css/blogmenu.css" rel="stylesheet" media="screen">
  
  <!-- Post/Page Specific CSS -->
  
  <!-- Main Scripts -->
  <script src="/static/assets/app-20180717.min.js"></script>
  <script src="/static/assets/blog-20180717.min.js"></script>
  </head>

    

<body id="page-top" class="landing-page">

    
        <div class="search-tool"
      style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right:  0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;">
    <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog">

    <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;">
        <img src="/static/assets/img/search/cb-close.png" id="close-btn"/>
    </div>
</div>

<div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;">
    <img src="/static/assets/img/search/cb-search.png"  id="search-btn"  title="Double click Ctrl"/>
</div>

<div class="navbar-wrapper">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Shyaman Jayasundara</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <!-- <li><a class="page-scroll" href="/#"></a></li> -->
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/blog/">Blog</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/kace/">Kace</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/html/">HTML</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/linux/">Linux</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/wordpress/">Wordpress</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/games/">Games</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/mac/">Mac</a></li>
                        
                    
                        
                        
                        <li>
                        
                        <a class="page-scroll" href="/life/">Life</a></li>
                        
                    
                        
                    
                </ul>
            </div>
        </div>
    </nav>
</div>

    

    <div class="wrapper wrapper-content  animated fadeInRight article">
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="pull-right">
                    	
                        	<a class="btn btn-white btn-xs" href="/wordpress">Wordpress</a>
                        
                        	<a class="btn btn-white btn-xs" href="/apache">Apache</a>
                        
                    </div>
                    <div class="text-center article-title">
                    <span class="text-muted"><i class="fa fa-clock-o"></i> 13 Apr 2018</span>
                        <h1>
                            Come bloccare l'hotlinking delle immagini con .htaccess
                        </h1>
                     <div class="vote-info">
                        <i class="fa fa-book"></i> <a>822 Parole</a>
                        <i class="fa fa-clock-o"></i> <a>Tempo di lettura: 4 minuti</a>
                     </div>
                    </div>
                    	<p>Quando si parla di hotlinking  ci si riferisce ad una pratica – molto abusata – che permette di mostrare una risorsa (tipicamente un’immagine) all’interno di una pagina web senza che questa sia presente all’interno del proprio spazio, sfruttando quindi la banda e le risorse del server esterno che la ospita fisicamente.</p>

<h1 id="lhotlinking-danneggia-il-tuo-sito">L’HOTLINKING DANNEGGIA IL TUO SITO</h1>

<p>Facciamo un esempio. L’immagine che vedete qui sotto è stata caricata direttamente su un mio sito (ospite originale di questo articolo). Il server web non fa altro che andare a caricare una risorsa interna (l’immagine stessa) e mostrarla al visitatore, senza alcun carico elaborativo extra.</p>

<p><img src="/static/assets/img/blog/hotlinking-htaccess/kenny-mccormick.jpg" alt="Kenny" /></p>

<p>Il codice dell’immagine è il seguente:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/wp-content/uploads/2012/05/kenny-mccormick.jpg"</span> <span class="na">alt=</span><span class="s">""</span> <span class="na">border=</span><span class="s">"0"</span> <span class="na">width=</span><span class="s">"320"</span> <span class="na">height=</span><span class="s">"240"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Un sito esterno, invece di effettuare il download dell’immagine e di caricarla sul proprio server (cosa che, oltretutto, è sempre consigliabile in quanto migliora moltissimo i tempi di caricamento e le prestazioni generali del sito), ottiene il collegamento diretto alla risorsa e lo include all’interno di una propria pagina.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"https://www.skyflash.it/wp-content/uploads/2012/05/kenny-mccormick.jpg"</span> <span class="na">alt=</span><span class="s">""</span> <span class="na">border=</span><span class="s">"0"</span> <span class="na">width=</span><span class="s">"320"</span> <span class="na">height=</span><span class="s">"240"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Il risultato sarà che il secondo sito, eterno al nostro, sfrutta l’immagine senza però sacrificare il proprio spazio web, mentre il nostro sito, su cui risiede l’immagine, sarà sottoposto ad un carico eccessivo (ed assolutamente non richiesto nè tanto meno gradito) sia per quanto riguarda la propria banda passante che per le risorse del server.</p>

<h1 id="come-proteggersi-da-hotlinking">COME PROTEGGERSI DA HOTLINKING</h1>

<p>Sono sufficienti alcune righe da aggiungere al proprio, immancabile, file <em>.htaccess</em> e, se volete, un’immagine preparata per lo scopo, che servirà per sbattere in faccia al webmaster antipatico la dura verità :smile:</p>

<p><strong>ATTENZIONE:</strong> la modifica di .htaccess, se fatta da persone non esperte e non particolarmente attente, può generare molti problemi al vostro sito WordPress, fino a <strong>renderlo inaccessibile</strong>. Assicuratevi quindi di fare <strong>SEMPRE una copia di sicurezza</strong> di .htaccess prima di cominciare le modifiche</p>

<p>Aprite in un qualsaisi editor di testo il vostro file <em>.htaccess</em> ed in coda (se usate WordPress, dovrebbero esserci solo le direttive di default) e <strong>dopo ### END WordPress ###</strong> aggiungete il seguente codice:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">### Blocca l'hotlinking - Webmaster cattivo pussa via</span>
RewriteEngineon
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^$
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?skyflash.it[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?google.com[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!googlebot[NC]
<span class="nc">RewriteCond</span>%{REQUEST_URI}!^hotlink.jpg$
<span class="nc">RewriteRule</span>\.(jpg|jpeg|png|gif|js|swf)$hotlink.jpg[NC,R,L]
</code></pre></div></div>

<h2 id="spiegazione">SPIEGAZIONE</h2>

<p>Alla <strong>terza riga</strong> trovate:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RewriteCond</span>%{HTTP_REFERER}!^$
</code></pre></div></div>

<p>Questa istruzione consente ai referrer che non forniscono informazioni di accedere al contenuto. Ciò è reso necessario in quanto molti visitatori (soprattutto quelli che si connettono dall’ufficio e si trovano dietro a proxy) sono protetti da un firewall che non rilascia informazioni al server per ragioni di sicurezza.</p>

<p><strong>Righe 4, 5 e 6:</strong></p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?skyflash.it[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?google.com[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!googlebot[NC]
</code></pre></div></div>

<p>specificano i domini che invece possono effettuare l’hotlinking e quindi visualizzare le immagini presenti sul server. Quindi scriveremo il nostro dominio internet e, in caso vogliate farvi indicizzare le immagini, Google. Tutti gli altri sono fuori.</p>

<p><strong>Riga 7:</strong></p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RewriteCond</span>%{REQUEST_URI}!^hotlink.jpg$
</code></pre></div></div>

<p>Se proprio qualcuno vuole rubare qualche immagine, allora lasciamogli prendere quella che abbiamo preparato per segnalare gli hotlinker. Questa riga ci assicura che l’immagine sia sempre visualizzabile.</p>

<p><strong>Riga 8:</strong></p>
<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RewriteRule</span>\.(jpg|jpeg|png|gif|js|swf)$hotlink.jpg[NC,R,L]
</code></pre></div></div>

<p>Specifica il formato dei file protetti dall’hotlinking (non solo le immagini ne sono soggette) e sostituisce le richieste con un’immagine statica.</p>

<p>Ovviamente potrete specificare l’immagine che desiderate, ma assicuratevi che questa non sia protetta (vedi riga precedente) oppure, ancora meglio, caricatela su una risorsa esterna come <a href="http://db.tt/wgafhzXi">Dropbox</a>, o il risultato sarà un loop infinito!</p>

<h3 id="concedere-laccesso-a-bing-yahoo-e-facebook">CONCEDERE L’ACCESSO A BING, YAHOO E FACEBOOK</h3>

<p>Esattamente come abbiamo fatto per Google, aggiungiamo al nostro <em>.htaccess</em> le seguenti direttive:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RewriteCond</span>%{HTTP_REFERER}!msn.[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!yahoo.[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^https?://(www\.)?facebook\.com[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!facebookplatform[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!msnbot[NC]
<span class="nc">RewriteCond</span>${HTTP_USER_AGENT}!slurp[NC]
</code></pre></div></div>

<h2 id="conclusioni">CONCLUSIONI</h2>

<p>Il risultato finale sarà quindi il seguente:</p>

<div class="language-apache highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">### Blocca l'hotlinking - Webmaster cattivo pussa via</span>

RewriteEngineon
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^$
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?skyflash.it[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^http(s)?://(www\.)?google.com[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!msn.[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!yahoo.[NC]
<span class="nc">RewriteCond</span>%{HTTP_REFERER}!^https?://(www\.)?facebook\.com[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!googlebot[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!facebookplatform[NC]
<span class="nc">RewriteCond</span>%{HTTP_USER_AGENT}!msnbot[NC]
<span class="nc">RewriteCond</span>${HTTP_USER_AGENT}!slurp[NC]
<span class="nc">RewriteCond</span>%{REQUEST_URI}!^hotlink.jpg$
<span class="nc">RewriteRule</span>\.(jpg|jpeg|png|gif|js|swf)$hotlink.jpg[NC,R,L]
</code></pre></div></div>

<p>Chi dovesse linkare ad una risorsa con estensione jpg, jpeg, png, gif, js o swf sul sito così “trattato”, come unico risultato avrà la visualizzazione della seguente immagine</p>

<p><img src="/static/assets/img/blog/hotlinking-htaccess/hotlink.jpg" alt="Hotlink-Monkey" /></p>

<p>Se guardando le statistiche del vostro spazio web avete notato un consumo eccessivo di banda in uscita o se state rilevando una grande quantità di accessi esterni alle stesse immagini, probabilmente siete hotlinkati da qualcuno. Ora sapete come difendervi.</p>

<p>Risorse esterne:</p>

<ul>
  <li><a href="http://www.istanto.net/stop-bandwith-thief-using-rewrite-rules-on-htaccess-file.html">Stop bandwith thief using rewrite rules on .htaccess file</a></li>
  <li><a href="http://www.htaccesstools.com/hotlink-protection/">Prevent hotlinking of images – how to hotlink protect</a></li>
  <li><a href="http://www.hongkiat.com/blog/smarter-way-to-prevent-image-hotlinking-with-htaccess/">Smarter Way To Prevent Image Hotlinking With .Htaccess</a></li>
  <li><a href="http://gabrieleromanato.com/2012/03/impedire-hotlinking-immagini-htaccess/">Impedire l’hotlinking delle immagini con il file .htaccess</a></li>
  <li><a href="http://vincenzodibiaggio.it/2008/07/11/proteggiamoci-dallhotlinking-con-un-semplice-file-htaccess/">Proteggiamoci dall’hotlinking con un semplice file</a></li>
  <li><a href="http://www.thewebsqueeze.com/web-design-tutorials/stop-image-hotlinking-with-htaccess.html">Stop image hotlinking with .htaccess</a></li>
  <li><a href="https://www.skyflash.it/internet-reti/sicurezza/come-bloccare-lhotlinking-delle-immagini-tramite-htaccess/6552/">Il post originale</a></li>
</ul>

                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                                <h5 style="display: inline;">Tags:</h5>
                                
                                    <button class="btn btn-white btn-xs" type="button">htaccess</button>
                                
                                    <button class="btn btn-white btn-xs" type="button">apache</button>
                                
                                    <button class="btn btn-white btn-xs" type="button">wordpress</button>
                                
                        </div>
                        <div class="col-md-6">
                            <div class="small text-right">
                                <div>
                                
                                <i class="fa fa-comments-o"> </i> <span class="disqus-comment-count" data-disqus-url="http://localhost:4000/blog/wordpress/bloccare-hotlinking-immagini/">0</span> 
                                
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12">
                            <!-- donate -->
                            
                            <br>
                            <!-- share -->
                            <!-- AddToAny BEGIN -->
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
    <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
    <a class="a2a_button_facebook"></a>
    <a class="a2a_button_twitter"></a>
    <a class="a2a_button_linkedin"></a>
    <a class="a2a_button_reddit"></a>
    <a class="a2a_button_buffer"></a>
    <a class="a2a_button_email"></a>
    <a class="a2a_button_whatsapp"></a>
</div>
<script>
    var a2a_config = a2a_config || {};
    a2a_config.locale = "it";
</script>
<script async src="https://static.addtoany.com/menu/page.js"></script>
<!-- AddToAny END -->
                            <br>
                            <!-- comment -->
                            
<div id="disqus_thread"></div>
<script>
/** 
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. 
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables 
*/
	/*
	var disqus_config = function () { this.page.url = PAGE_URL;
	// Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER;
	// Replace PAGE_IDENTIFIER with your page's unique identifier variable };
	*/
	(function() {
		var d = document, s = d.createElement('script');
		s.src = '//cristiancastellari-it.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<div class="row" style="background: #1c1e1e">
    <div class="col-lg-8 col-lg-offset-2 text-center m-t-lg m-b-lg">
      <p id="jalpc_site_pv" style="color: #FFFFFF">
        <strong>&copy; 2018 Shyaman Jayasundara</strong>
      </p>
    </div>
</div>




<script id="dsq-count-scr" src="https://cristiancastellari-it.disqus.com/count.js" async></script>

   

</body>
</html>
